<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Catatan kecil Andi."><link rel="shortcut icon" href=https://akherlan.github.io/favicon.ico><link rel=stylesheet href=/css/style.min.css><title>PostgreSQL dan RStudio</title></head><body><header id=banner><h2><a href=https://akherlan.github.io/>Notebook</a></h2><nav><ul><li><a href=/about/ title=about>about</a></li><li><a href=/now/ title=now>now</a></li><li><a href=/read/ title=read>read</a></li><li><a href=/index.xml title=rss>rss</a></li></ul></nav></header><main id=content><article><header id=post-header><h1>PostgreSQL dan RStudio</h1><time>April 16, 2020</time></header><aside id=toc><h4>Table of Contents</h4><nav id=TableOfContents><ul><li><ul><li><a href=#1-instal-odbc-drivers-di-komputer-linux>1. Instal odbc drivers di komputer linux</a></li><li><a href=#2-periksa-hasil-instalasi-kita>2. Periksa hasil instalasi kita</a></li><li><a href=#3-konfigurasi--sunting-berkas-odbcini>3. Konfigurasi / sunting berkas odbc.ini</a></li><li><a href=#4-menginstal-paket-odbc-dan-dbi-di-r>4. Menginstal paket odbc dan DBI di R</a></li></ul></li></ul></nav></aside><p>Saya sedang belajar mengelola data dalam sebuah basisdata. Sebab ketertarikan saya dengan bidang geospasial, saya coba untuk mempelajari DBMS terkenal untuk ini, yaitu PostgreSQL dengan ekstensi PostGIS.</p><p>Singkat cerita, saya sudah melakukan instalasi dan pengaturan basis data postgres + postgis di komputer saya. Selanjutnya saya ingin coba membuat koneksi untuk akses basisdata melalui RStudio. Saya merasa agak sedikit sombong karena sebelumnya sudah sukses dengan koneksi PostgreSQL lewat QGIS.</p><p>Ada <a href=https://db.rstudio.com/databases/postgresql/>dua cara</a> membuat koneksi dari R untuk mengakses basis data:</p><ul><li>menggunakan paket <code>odbc</code> dengan <code>DBI</code></li><li>menggunakan paket <code>RPostgres</code></li></ul><p>Untuk saat ini saya menggunakan cara yang pertama. Langkah yang saya lakukan adalah:</p><h3 id=1-instal-odbc-drivers-di-komputer-linux>1. Instal odbc drivers di komputer linux</h3><p>Memasang odbc di Ubuntu dengan mengetikkan perintah berikut:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ sudo apt update 
$ sudo apt install unixodbc unixodbc-dev odbc-postgresql
</code></pre></div><p>Setelah itu &mldr;</p><h3 id=2-periksa-hasil-instalasi-kita>2. Periksa hasil instalasi kita</h3><p>Beberapa berkas yang perlu kita tahu dan butuhkan untuk menunjang pengaturan dan kerja paket <code>odbc</code> di R diantaranya berkas <code>odbcinst.ini</code> dan <code>odbc.ini</code>. Di mana mereka?</p><p>Kita bisa gunakan perintah berikut di terminal:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ odbcinst -j
</code></pre></div><figure><img src=https://telegra.ph/file/74d5055f0bc6505dec8e1.png alt="terminal command output"><figcaption><h4>Gambar 1</h4><p>Keluaran perintah <code>odbcinst_j</code></p></figcaption></figure><p>Atau dengan cara lain, misalnya:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ locate odbcinst.ini
$ locate odbc.ini
</code></pre></div><figure><img src=https://telegra.ph/file/ab7612fe9f5b20325647e.png alt="terminal command output"><figcaption><h4>Gambar 2</h4><p>Lokasi berkas konfigurasi odbc</p></figcaption></figure><p>Akan ditampilkan tempat berkas-berkas itu tersimpan.</p><p>Kemudian coba kita cek apa isi dari berkas <code>odbcinst.ini</code>. Berikut isinya:</p><figure><img src=https://telegra.ph/file/a57cc39e019779844a954.png alt="terminal command output"><figcaption><h4>Gambar 3</h4><p>Print odbcinst.ini</p></figcaption></figure><p>Sedangkan untuk berkas <code>.odbc.ini</code>, sepengalaman saya saat <em>fresh-install</em> tidak ada isinya alias masih kosong. Berikutnya kita perlu isi itu.</p><h3 id=3-konfigurasi--sunting-berkas-odbcini>3. Konfigurasi / sunting berkas odbc.ini</h3><p>Berkas ini ada di dua tempat, seperti sudah kita periksa sebelumnya.</p><p><code>/etc/odbc.ini</code> menyimpan pengaturan yang bisa digunakan secara global. Artinya bisa diakses oleh semua user di komputer terinstal, tetapi untuk pengaturannya kita membutuhkan akses root.</p><p>Sedangkan <code>~/.odbc.ini</code> hanya untuk user tertentu (sesuai lokasi home punya user mana). Kita tidak perlu root untuk ini. Berkasnya disembunyikan di direktori home.</p><p>Sunting berkas <code>.odbc.ini</code> milik user menggunakan text editor <code>nano</code> dengan perintah di terminal:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ nano ~/.odbc.ini
</code></pre></div><p>Isikan detail seperti berikut:</p><pre><code>[PostgreSQL]
Driver              = PostgreSQL Driver
Database            = namaDbKamu
Servername          = localhost
UserName            = usernamekamu
Password            = passwordSayaKamuGabolehTau
Port                = 5432
</code></pre><figure><img src=https://telegra.ph/file/6dcbc3daf6344722708d3.png alt="terminal text nano"><figcaption><h4>Gambar 4</h4><p>Isi konfigurasi</p></figcaption></figure><p>Ganti nilai pada bagian <code>Database</code> dan <code>UserName</code>, juga pada bagian <code>Password</code>, sesuai dengan pengaturan basis data PostgreSQL milik teman-teman.</p><h3 id=4-menginstal-paket-odbc-dan-dbi-di-r>4. Menginstal paket odbc dan DBI di R</h3><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>install.packages</span><span class=p>(</span><span class=s>&#34;odbc&#34;</span><span class=p>)</span>
<span class=nf>install.packages</span><span class=p>(</span><span class=s>&#34;DBI&#34;</span><span class=p>)</span>
</code></pre></div><p>Kemudian restart R session.</p><p>Koneksi sudah bisa digunakan&mldr;</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/z5tZ1C9SVyo style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><p>Sekian.</p><hr><p><strong>Referensi:</strong> <a href=https://db.rstudio.com/best-practices/drivers/#linux-debian-ubuntu>https://db.rstudio.com/best-practices/drivers/#linux-debian-ubuntu</a></p></article></main><footer id=footer>Powered by Hugo and Github Page.</footer></body></html>